function setSelectHandler(){const t=document.querySelectorAll(".select");t.length>0&&t.forEach((function(t){let e=t.querySelector(".select__button"),i=t.querySelector(".select__list"),s=t.querySelectorAll(".select__item"),n=t.querySelector(".select__input_hidden");function c(){e&&e.classList.remove("select__button_active"),i&&i.classList.remove("select__list_visible")}e&&e.addEventListener("click",(function(){i&&(e.classList.toggle("select__button_active"),i.classList.toggle("select__list_visible"))})),s.length>0&&s.forEach((t,i,l)=>{t.addEventListener("click",(function(t){t.stopPropagation(),e&&(e.innerText=this.innerText),n&&(n.value=this.dataset.value),s.forEach(t=>t.classList.remove("select__item_hidden")),this.classList.add("select__item_hidden"),c()}))}),document.addEventListener("click",(function(t){t.target!==e&&c()})),document.addEventListener("keydown",(function(t){"Tab"!==t.key&&"Escape"!==t.key||c()}))}))}function setTabHandler(){document.querySelectorAll(".tabs").forEach((function(t){let e=t.querySelectorAll(".tabs__btn"),i=t.querySelectorAll(".tabs__element"),s=t.querySelectorAll(".select__item");function n(t){t&&(i.forEach(t=>{t.classList.remove("tabs__element_active")}),t.classList.add("tabs__element_active"))}function c(i,s){let c=i,l=c.getAttribute("data-value"),a=t.querySelector(l);"tabs_button"===s?c.classList.contains("tabs__btn_active")||(n(a),e.forEach(t=>{t.classList.remove("tabs__btn_active")}),c.classList.add("tabs__btn_active")):"select"===s&&n(a)}e.length>0&&e.forEach(t=>{t.addEventListener("click",(function(){c(t,"tabs_button")}))}),s.length>0&&s.forEach(t=>{t.addEventListener("click",(function(){c(t,"select")}))})}))}function setDefaultValue(){const t=document.querySelectorAll(".tabs");t.length>0&&t.forEach(t=>{let e=t.querySelector(".tabs__btn"),i=t.querySelector(".select__item");e&&e.click(),i&&i.click()})}function loadProducts(t){let e=document.querySelector(".products__tabs");if(e)try{let i="",s="",n='<div class="tabs__control">',c="</div>",l='<ul class="tabs__list">',a="</ul>",o='<div class="tabs__select select"><button type="button" class="select__button text"></button><ul class="select__list">',r='</ul><input type="text" name="category" value="" class="select__input select__input_hidden"></div>',u="",d="",_="",b='<div class="tabs__content">',m="</div>",f="",g='<ul class="products-list">',v="</ul>",h='<li class="products-list__item">',p="</li>";t&&t.tabs&&t.tabs.length>0&&(t.tabs.forEach(t=>{const e=t.id,i=t.name,s=t.products;let n=`<li data-value="#${e}" class="select__item text">${i}</li>`;u+=` <li class="tabs__item">\n                                                <button class="tabs__btn text" data-value="#${e}" type="button">${i}</button>\n                                            </li>`,d+=n;let c=`<div class="tabs__element product" id="${e}">`,l="";s&&s.length>0&&s.forEach(t=>{t.id;let e=`<img class="products-list__img" src="img/${t.img}" alt="Product">`,i=`<h3 class="products-list__title title title_size_s">${t.name}</h3>`,s=`<div class="products-list__info">\n                                                    <p class="products-list__text text text_size_s">${t.description}</p>\n                                                    <button class="products-list__btn btn btn_secondary" type="button">Подробнее</button>\n                                                </div>`;l+=h,l+=e+i+s,l+=p}),f+=c,f+=g,f+=l,f+=v,f+="</div>"}),s+=n,s+=l+u+a,s+=o+d+r,s+=c,_+=b,_+=f,_+=m,i=s+_,e.insertAdjacentHTML("beforeend",i))}catch{}}async function getProducts(){try{let t=await fetch("json/products.json",{method:"GET"});if(t.ok){loadProducts(await t.json())}else alert("Ошибка!")}catch{alert("Ошибка!")}finally{setTabHandler(),setSelectHandler(),setDefaultValue()}}getProducts();const isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.Opera()||isMobile.Windows()||isMobile.iOS()}};function getClassDevice(){isMobile.any()?document.body.classList.add("_touch"):document.body.classList.add("_pc")}function setActiveMobileMenu(){let t=document.querySelector(".icon-menu");t&&t.addEventListener("click",(function(e){let i=document.querySelector(".menu__body");i&&(document.body.classList.toggle("_lock"),t.classList.toggle("_active"),i.classList.toggle("_active"))}))}function loadPublications(t){let e=document.querySelector(".publications-panel__list");if(e)try{const i=3;let s="";if(t&&t.publications&&t.publications.length>0){const n=t.publications.sort((t,e)=>new Date(e.date)-new Date(t.date));for(let t=0;t<i;t++){const e=n[t],i=(e.id,e.title),c=e.subtitle,l=e.date?new Date(e.date):"",a=getDate(l);s+=`<article class="publication__item">\n                                                <img src="img/${e.img_path}" alt="Publication Image" class="publication__img">\n                                                <div class="publication__container">\n                                                    <h3 class="publication__title title title_size_m">${i}</h3>\n                                                    <p class="publication__text text">${c}</p>\n                                                    <div class="publication__footer">\n                                                        <time class="publication__date" datetime="${l}">${a}</time>\n                                                        <a class="publication__link _icon-next link link_size_s"></a>\n                                                    </div>\n                                                </div>\n                                            </article>`}e.insertAdjacentHTML("beforeend",s)}}catch{alert("Ошибка!")}}async function getPublications(){try{let t=await fetch("json/publications.json",{method:"GET"});if(t.ok){loadPublications(await t.json())}else alert("Ошибка!")}catch{alert("Ошибка!")}}setActiveMobileMenu(),getPublications();const month=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];function testWebP(t){var e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function formateDate(t){return`${t.getDate()} ${month[t.getMonth()]} ${t.getFullYear()}`}function getDate(t){return t?formateDate(t):""}testWebP((function(t){1==t?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));